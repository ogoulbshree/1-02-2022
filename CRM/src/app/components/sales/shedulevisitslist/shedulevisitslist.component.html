<br />

<section *ngIf="this._uiservice.langDataSource.value == 'ar'" dir="rtl">
  <div class="container-fluid">
    <form class="form-row dateSection" name="form" #f="ngForm">
      <div class="form-group row col-md-4">
        <label class="col-sm-3 col-form-label">
          {{ field_name_shedule_visits_fromdate
          }}<span class="text-danger font-weight-bold"> *</span></label
        >

        <div class="col-sm-8">
          <input
            type="date"
            class="form-control"
            max="{{ date | date: 'yyyy-MM-dd' }}"
            [(ngModel)]="model.fromDate"
            name="fromDate"
            #fromDate="ngModel"
            [ngClass]="{
              'is-invalid': f.submitted && fromDate.invalid,
              'is-valid': f.submitted && fromDate.valid
            }"
            required
          />

          <div *ngIf="f.submitted && fromDate.invalid" class="invalid-feedback">
            <div *ngIf="fromDate.errors.required">Please provide fromDate</div>
          </div>
        </div>
      </div>
      <div class="form-group row col-md-4">
        <label class="col-sm-3 col-form-label">
          {{ field_name_shedule_visits_todate
          }}<span class="text-danger font-weight-bold"> *</span></label
        >

        <div class="col-sm-8">
          <input
            type="date"
            class="form-control"
            [(ngModel)]="model.toDate"
            name="toDate"
            #toDate="ngModel"
            [ngClass]="{
              'is-invalid': f.submitted && toDate.invalid,
              'is-valid': f.submitted && toDate.valid
            }"
            required
          />
          <div *ngIf="f.submitted && toDate.invalid" class="invalid-feedback">
            <div *ngIf="toDate.errors.required">Please provide toDate</div>
          </div>
        </div>
      </div>
      <div class="col-md-2">
        <button class="btn btn-success search-btn" (click)="filterVisits()">
          {{ field_name_shedule_visits_search }}
        </button>
      </div>
    </form>
    <form
    class="form-row dateSectionMat"
    name="form"
    #f="ngForm"
    (ngSubmit)="f.form.valid && filterVisits()"
  >
    &nbsp;&nbsp;<mat-form-field
      style="width: 110px; margin-left: 10px; font-weight: bold"
    >
      <input
        matInput
        [matDatepicker]="picker"
        [(ngModel)]="model.fromDate"
        name="fromDate"
        #fromDate="ngModel"
        [ngClass]="{
          'is-invalid': f.submitted && fromDate.invalid,
          'is-valid': f.submitted && fromDate.valid
        }"
        required
        placeholder="{{ field_name_shedule_visits_fromdate}}"
      />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
    <div *ngIf="f.submitted && fromDate.invalid" class="invalid-feedback">
      <div *ngIf="fromDate.errors.required">Please provide fromDate</div>
    </div>

    <mat-form-field style="width: 93px; margin-left: 10px; font-weight: bold">
      <input
        matInput
        [matDatepicker]="picker1"
        [(ngModel)]="model.toDate"
        name="toDate"
        #toDate="ngModel"
        [ngClass]="{
          'is-invalid': f.submitted && toDate.invalid,
          'is-valid': f.submitted && toDate.valid
        }"
        required
        placeholder="{{ field_name_shedule_visits_todate}}"
      />
      <mat-datepicker-toggle
        matSuffix
        [for]="picker1"
      ></mat-datepicker-toggle>
      <mat-datepicker #picker1></mat-datepicker>
    </mat-form-field>
    <div *ngIf="f.submitted && toDate.invalid" class="invalid-feedback">
      <div *ngIf="toDate.errors.required">Please provide toDate</div>
    </div>
    &nbsp;&nbsp;
    <div style="width: 110px">
      <button class="btn btn-success search-btn font-weight-bold">
        {{ field_name_shedule_visits_search }}
      </button>
    </div>
  </form>
    <div class="col-md-12 col-lg-12">
      <div class="row">
        <!--  <div class="col-md-3" style="margin-bottom: 15px;">
          <input
            type="text"
            class="form-control"
            name="email"
            placeholder="Enter Sales User Email to search"
            [(ngModel)]="email"
            (ngModelChange)="searchVisits('clear')"
          />
        </div> -->
        <!--  <div class="col-md-1">
          
          <button
            type="button"
            class="btn btn-success"
            (click)="searchVisits('search')"

          ><i class="fa fa-search" ></i>
           {{ field_name_shedule_visits_search }}
          </button>
        </div> -->
        <div class="col-md-3">
          <div
            class="form-group has-search dateSection"
            style="display: flex; align-items: center"
          >
            <!-- <span class="fa fa-search form-control-feedback"></span> -->
            <input
              type="text"
              class="form-control"
              name="email"
              placeholder="Enter Sales User Email to search"
              autocomplete="off"
              [(ngModel)]="email"
              (ngModelChange)="searchVisits('clear')"
            />
            <button class="btn btn-success" (click)="searchVisits('search')">
              <!-- <i class="fa fa-search"></i> -->
              {{ field_name_shedule_visits_search }}
            </button>
          </div>
          <div
          class="form-group has-search dateSectionMat "
          style="display: flex; align-items: center"
        >
          <!-- <span class="fa fa-search form-control-feedback"></span> -->
          <mat-form-field
          class="example-full-width"
          style="width: 200px; font-weight: bold"
          >
          <input
            matInput
            name="email"
            placeholder="Enter Sales User Email to search"
            autocomplete="off"
            [(ngModel)]="email"
            (ngModelChange)="searchVisits('clear')"
          />
        </mat-form-field>
          <button style="margin-right:80px" class="btn btn-success font-weight-bold" (click)="searchVisits('search')">
            <!-- <i class="fa fa-search"></i> -->
            {{ field_name_shedule_visits_search }}
          </button>
        </div>
        </div>
        
        <div class="col-md-1">
          <!--   <span *ngIf="CAN_ADD"> -->
          <button
            type="button"
            class="btn btn-info"
            routerLink="/sales/shedulevisits"
          >
            <i class="fa fa-plus" aria-hidden="true"></i
            >{{ field_name_shedule_visits_addshedule_visits }}
          </button>
          <!--    </span> -->
        </div>
      </div>
    </div>

    <div class="col-md-12 col-lg-12">
      <div class="row">
        <!--  <div class="col-sm-1">
            <button type="button" (click)="exportToPrint()" class="btn btn-success">
              <i class="fa fa-file-pdf-o" aria-hidden="true"></i> {{field_name_shedule_visits_print}}
              </button>
           </div> 
           <div class="col-sm-1">
              <button type="button" (click)="downloadPdf()" class="btn btn-success">
                <i class="fa fa-file-pdf-o" aria-hidden="true"></i>{{field_name_shedule_visits_pdf}}
                </button>
             </div> 
           <div class="col-sm-1">
           <button type="button" (click)="generateCsv()" class="btn btn-success">
            <i class="fa fa-building-o" aria-hidden="true"></i>{{field_name_shedule_visits_csv}}
            </button>
           </div>
           <div class="col-md-1">
            <button type="button" class="btn btn-info" 
            routerLink=""><i class="fa fa-upload" aria-hidden="true"></i>{{field_name_shedule_visits_import}}</button>
          </div> -->
        <!--  <div class="col-sm-1">
            <button type="button" class="btn btn-info" 
            routerLink="">  <i class="fa fa-arrows-h" aria-hidden="true"></i>Convert to Lead</button>
          </div> -->
      </div>
    </div>
    <!--  <ng-container *ngIf="scheduleVisitLists.length;else noRecords"> -->
    <div class="table-responsive">
      <table
        id="contentToConvert"
        class="table"
        [mfData]="scheduleVisitLists"
        #mf="mfDataTable"
      >
        <thead class="thead-light">
          <tr style="white-space: nowrap">
            <th width="20%" (click)="sort('sales_email')">
              <mfDefaultSorter by="sales_email">{{
                field_name_shedule_visits_salesemail
              }}</mfDefaultSorter>
              <i class="fa fa-sort"></i>
            </th>
            <th width="20%" (click)="sort('first_name')">
              <mfDefaultSorter by="first_name">{{
                field_name_shedule_visits_customer_name
              }}</mfDefaultSorter>
              <i class="fa fa-sort"></i>
            </th>
            <th width="20%" (click)="sort('created_by')">
              <mfDefaultSorter by="created_by">{{
                field_name_shedule_visits_created_by
              }}</mfDefaultSorter>
              <i class="fa fa-sort"></i>
            </th>
            <th width="20%" (click)="sort('date')">
              <mfDefaultSorter by="date">{{
                field_name_shedule_visits_date
              }}</mfDefaultSorter>
              <i class="fa fa-sort"></i>
            </th>
            <th width="20%" (click)="sort('time')">
              <mfDefaultSorter by="time">{{
                field_name_shedule_visits_time
              }}</mfDefaultSorter>
              <i class="fa fa-sort"></i>
            </th>
            <th width="20%" *ngIf="SHOW_EDIT_DELETE">
              {{ field_name_shedule_visits_actions }}
            </th>
          </tr>
        </thead>
        <tbody *ngIf="mf.data?.length >= 1">
          <tr
            *ngFor="
              let obj of mf.data
                | orderBy: key:reverse
                | paginate
                  : {
                      itemsPerPage: 5,
                      currentPage: p,
                      totalItems: scheduledVisitCount
                    };
              let i = index
            "
          >
            <td>{{ obj.email }}</td>
            <td>{{ obj.first_name }}</td>
            <td>{{ obj.created_by }}</td>
            <td>{{ obj.date }}</td>
            <td>{{ obj.time }}</td>
            <td *ngIf="SHOW_EDIT_DELETE">
              <i class="fa fa-edit" (click)="onClickEdit(obj)"></i>

              <span *ngIf="ALL_DELETE_ALLOWED"
                ><i (click)="onClickDelete(obj)" class="fa fa-trash"></i
              ></span>
            </td>
          </tr>
        </tbody>
        <tbody *ngIf="mf.data?.length <= 0">
          <tr class="odd" style="opacity: 1">
            <td
              valign="top"
              colspan="8"
              style="text-align: center"
              class="dataTables_empty"
            >
              No data available in table
            </td>
          </tr>
        </tbody>
        <tfoot *ngIf="mf.data?.length > 0">
          <tr>
            <td colspan="4">
              <pagination-controls
                (pageChange)="pageChanged('schedule', (p = $event))"
              >
              </pagination-controls>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
    <!--    </ng-container>
                <ng-template #noRecords>
                    <h3>{{'No records found' | translate}} </h3>
                </ng-template> -->
  </div>
</section>

<br />

<section *ngIf="this._uiservice.langDataSource.value != 'ar'" dir="ltr">
  <div class="container-fluid">
    <form class="form-row dateSection" name="form" #f="ngForm">
      <div class="form-group row col-md-4">
        <label class="col-sm-3 col-form-label">
          {{ field_name_shedule_visits_fromdate
          }}<span class="text-danger font-weight-bold"> *</span></label
        >

        <div class="col-sm-8">
          <input
            type="date"
            class="form-control"
            max="{{ date | date: 'yyyy-MM-dd' }}"
            [(ngModel)]="model.fromDate"
            name="fromDate"
            #fromDate="ngModel"
            [ngClass]="{
              'is-invalid': f.submitted && fromDate.invalid,
              'is-valid': f.submitted && fromDate.valid
            }"
            required
          />

          <div *ngIf="f.submitted && fromDate.invalid" class="invalid-feedback">
            <div *ngIf="fromDate.errors.required">Please provide fromDate</div>
          </div>
        </div>
      </div>
      <div class="form-group row col-md-4">
        <label class="col-sm-3 col-form-label">
          {{ field_name_shedule_visits_todate
          }}<span class="text-danger font-weight-bold"> *</span></label
        >

        <div class="col-sm-8">
          <input
            type="date"
            class="form-control"
            [(ngModel)]="model.toDate"
            name="toDate"
            #toDate="ngModel"
            [ngClass]="{
              'is-invalid': f.submitted && toDate.invalid,
              'is-valid': f.submitted && toDate.valid
            }"
            required
          />
          <div *ngIf="f.submitted && toDate.invalid" class="invalid-feedback">
            <div *ngIf="toDate.errors.required">Please provide toDate</div>
          </div>
        </div>
      </div>
      <div class="col-md-2">
        <button class="btn btn-success search-btn" (click)="filterVisits()">
          {{ field_name_shedule_visits_search }}
        </button>
      </div>
    </form>
    <form
    class="form-row dateSectionMat"
    name="form"
    #f="ngForm"
    (ngSubmit)="f.form.valid && filterVisits()"
  >
    &nbsp;&nbsp;<mat-form-field
      style="width: 110px; margin-left: 10px; font-weight: bold"
    >
      <input
        matInput
        [matDatepicker]="picker"
        [(ngModel)]="model.fromDate"
        name="fromDate"
        #fromDate="ngModel"
        [ngClass]="{
          'is-invalid': f.submitted && fromDate.invalid,
          'is-valid': f.submitted && fromDate.valid
        }"
        required
        placeholder="{{ field_name_shedule_visits_fromdate}}"
      />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
    <div *ngIf="f.submitted && fromDate.invalid" class="invalid-feedback">
      <div *ngIf="fromDate.errors.required">Please provide fromDate</div>
    </div>

    <mat-form-field style="width: 93px; margin-left: 10px; font-weight: bold">
      <input
        matInput
        [matDatepicker]="picker1"
        [(ngModel)]="model.toDate"
        name="toDate"
        #toDate="ngModel"
        [ngClass]="{
          'is-invalid': f.submitted && toDate.invalid,
          'is-valid': f.submitted && toDate.valid
        }"
        required
        placeholder="{{ field_name_shedule_visits_todate}}"
      />
      <mat-datepicker-toggle
        matSuffix
        [for]="picker1"
      ></mat-datepicker-toggle>
      <mat-datepicker #picker1></mat-datepicker>
    </mat-form-field>
    <div *ngIf="f.submitted && toDate.invalid" class="invalid-feedback">
      <div *ngIf="toDate.errors.required">Please provide toDate</div>
    </div>
    &nbsp;&nbsp;
    <div style="width: 110px">
      <button class="btn btn-success search-btn font-weight-bold">
        {{ field_name_shedule_visits_search }}
      </button>
    </div>
  </form>
    <div class="col-md-12 col-lg-12">
      <div class="row">
        <!--  <div class="col-md-3" style="margin-bottom: 15px;">
          <input
            type="text"
            class="form-control"
            name="email"
            placeholder="Enter Sales User Email to search"
            [(ngModel)]="email"
            (ngModelChange)="searchVisits('clear')"
          />
        </div> -->
        <!--  <div class="col-md-1">
          
          <button
            type="button"
            class="btn btn-success"
            (click)="searchVisits('search')"

          ><i class="fa fa-search" ></i>
           {{ field_name_shedule_visits_search }}
          </button>
        </div> -->
        <div class="col-md-3">
          <div
            class="form-group has-search dateSection"
            style="display: flex; align-items: center"
          >
            <!-- <span class="fa fa-search form-control-feedback"></span> -->
            <input
              type="text"
              class="form-control"
              name="email"
              placeholder="Enter Sales User Email to search"
              autocomplete="off"
              [(ngModel)]="email"
              (ngModelChange)="searchVisits('clear')"
            />
            <button class="btn btn-success" (click)="searchVisits('search')">
              <i class="fa fa-search"></i>
              {{ field_name_shedule_visits_search }}
            </button>
          </div>
          <div
            class="form-group has-search dateSectionMat "
            style="display: flex; align-items: center"
          >
            <!-- <span class="fa fa-search form-control-feedback"></span> -->
            <mat-form-field
            class="example-full-width"
            style="width: 200px; font-weight: bold"
            >
            <input
              matInput
              name="email"
              placeholder="Enter Sales User Email to search"
              autocomplete="off"
              [(ngModel)]="email"
              (ngModelChange)="searchVisits('clear')"
            />
          </mat-form-field>
            <button style="margin-left:43px" class="btn btn-success font-weight-bold" (click)="searchVisits('search')">
              <!-- <i class="fa fa-search"></i> -->
              {{ field_name_shedule_visits_search }}
            </button>
          </div>
        </div>
        <div class="col-md-1">
          <!--   <span *ngIf="CAN_ADD"> -->
          <button
            type="button"
            class="btn btn-info"
            routerLink="/sales/shedulevisits"
          >
            <i class="fa fa-plus" aria-hidden="true"></i
            >{{ field_name_shedule_visits_addshedule_visits }}
          </button>
          <!--    </span> -->
        </div>
      </div>
    </div>

    <div class="col-md-12 col-lg-12">
      <div class="row">
        <!--  <div class="col-sm-1">
            <button type="button" (click)="exportToPrint()" class="btn btn-success">
              <i class="fa fa-file-pdf-o" aria-hidden="true"></i> {{field_name_shedule_visits_print}}
              </button>
           </div> 
           <div class="col-sm-1">
              <button type="button" (click)="downloadPdf()" class="btn btn-success">
                <i class="fa fa-file-pdf-o" aria-hidden="true"></i>{{field_name_shedule_visits_pdf}}
                </button>
             </div> 
           <div class="col-sm-1">
           <button type="button" (click)="generateCsv()" class="btn btn-success">
            <i class="fa fa-building-o" aria-hidden="true"></i>{{field_name_shedule_visits_csv}}
            </button>
           </div>
           <div class="col-md-1">
            <button type="button" class="btn btn-info" 
            routerLink=""><i class="fa fa-upload" aria-hidden="true"></i>{{field_name_shedule_visits_import}}</button>
          </div> -->
        <!--  <div class="col-sm-1">
            <button type="button" class="btn btn-info" 
            routerLink="">  <i class="fa fa-arrows-h" aria-hidden="true"></i>Convert to Lead</button>
          </div> -->
      </div>
    </div>
    <!--  <ng-container *ngIf="scheduleVisitLists.length;else noRecords"> -->
    <div class="table-responsive">
      <table
        id="contentToConvert"
        class="table"
        [mfData]="scheduleVisitLists"
        #mf="mfDataTable"
      >
        <thead class="thead-light">
          <tr style="white-space: nowrap">
            <th width="20%" (click)="sort('sales_email')">
              <mfDefaultSorter by="sales_email">{{
                field_name_shedule_visits_salesemail
              }}</mfDefaultSorter>
              <i class="fa fa-sort"></i>
            </th>
            <th width="20%" (click)="sort('first_name')">
              <mfDefaultSorter by="first_name">{{
                field_name_shedule_visits_customer_name
              }}</mfDefaultSorter>
              <i class="fa fa-sort"></i>
            </th>
            <th width="20%" (click)="sort('created_by')">
              <mfDefaultSorter by="created_by">{{
                field_name_shedule_visits_created_by
              }}</mfDefaultSorter>
              <i class="fa fa-sort"></i>
            </th>
            <th width="20%" (click)="sort('date')">
              <mfDefaultSorter by="date">{{
                field_name_shedule_visits_date
              }}</mfDefaultSorter>
              <i class="fa fa-sort"></i>
            </th>
            <th width="20%" (click)="sort('time')">
              <mfDefaultSorter by="time">{{
                field_name_shedule_visits_time
              }}</mfDefaultSorter>
              <i class="fa fa-sort"></i>
            </th>
            <th width="20%" *ngIf="SHOW_EDIT_DELETE">
              {{ field_name_shedule_visits_actions }}
            </th>
          </tr>
        </thead>
        <tbody *ngIf="mf.data?.length >= 1">
          <tr
            *ngFor="
              let obj of mf.data
                | orderBy: key:reverse
                | paginate
                  : {
                      itemsPerPage: 5,
                      currentPage: p,
                      totalItems: scheduledVisitCount
                    };
              let i = index
            "
          >
            <td>{{ obj.email }}</td>
            <td>{{ obj.first_name }}</td>
            <td>{{ obj.created_by }}</td>
            <td>{{ obj.date }}</td>
            <td>{{ obj.time }}</td>
            <td *ngIf="SHOW_EDIT_DELETE">
              <i class="fa fa-edit" (click)="onClickEdit(obj)"></i>

              <span *ngIf="ALL_DELETE_ALLOWED"
                ><i (click)="onClickDelete(obj)" class="fa fa-trash"></i
              ></span>
            </td>
          </tr>
        </tbody>
        <tbody *ngIf="mf.data?.length <= 0">
          <tr class="odd" style="opacity: 1">
            <td
              valign="top"
              colspan="8"
              style="text-align: center"
              class="dataTables_empty"
            >
              No data available in table
            </td>
          </tr>
        </tbody>
        <tfoot *ngIf="mf.data?.length > 0">
          <tr>
            <td colspan="4">
              <pagination-controls
                (pageChange)="pageChanged('schedule', (p = $event))"
              >
              </pagination-controls>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
    <!--    </ng-container>
                <ng-template #noRecords>
                    <h3>{{'No records found' | translate}} </h3>
                </ng-template> -->
  </div>
</section>
