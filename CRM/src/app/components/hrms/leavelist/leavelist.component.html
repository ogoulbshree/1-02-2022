<br />
<br />

<section *ngIf="this._uiservice.langDataSource.value == 'ar'" dir='rtl' >
  <div class="container-fluid">
    <form class="form-row" name="form" #f="ngForm">
      <div class="container-fluid">
        <form class="form-row dateSection" name="form" #f="ngForm">
          <div class="form-group row col-md-4">
            <label class="col-sm-3 col-form-label">
              {{field_name_hrms_leaves_fromdate}}<span class="text-danger font-weight-bold"> *</span></label
            >
            <div class="col-sm-8">
              <input
                type="date"
                class="form-control"
                max="{{ date | date: 'yyyy-MM-dd' }}"
                [(ngModel)]="model.fromDate"
                name="fromDate"
                #fromDate="ngModel"
                [ngClass]="{
                  'is-invalid': f.submitted && fromDate.invalid,
                  'is-valid': f.submitted && fromDate.valid
                }"
                required
              />
    
              <div *ngIf="f.submitted && fromDate.invalid" class="invalid-feedback">
                <div *ngIf="fromDate.errors.required">Please provide fromDate</div>
              </div>
            </div>
          </div>
          <div class="form-group row col-md-4">
            <label class="col-sm-3 col-form-label">
            {{field_name_hrms_leaves_todate}}<span class="text-danger font-weight-bold"> *</span></label
            >
            <div class="col-sm-8">
              <input
                type="date"
                class="form-control"
                [(ngModel)]="model.toDate"
                name="toDate"
                #toDate="ngModel"
                [ngClass]="{
                  'is-invalid': f.submitted && toDate.invalid,
                  'is-valid': f.submitted && toDate.valid
                }"
                required
              />
              <div *ngIf="f.submitted && toDate.invalid" class="invalid-feedback">
                <div *ngIf="toDate.errors.required">Please provide toDate</div>
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <button class="btn btn-success search-btn" (click)="filterData()">
              {{field_name_hrms_leaves_search}}
            </button>
          </div>
        </form>
        <form
      class="form-row dateSectionMat"
      name="form"
      #f="ngForm"
      (ngSubmit)="f.form.valid && filterData()"
    >
      &nbsp;&nbsp;<mat-form-field
        style="width: 110px; margin-left: 10px; font-weight: bold"
      >
        <input
          matInput
          [matDatepicker]="picker"
          [(ngModel)]="model.fromDate"
          name="fromDate"
          #fromDate="ngModel"
          [ngClass]="{
            'is-invalid': f.submitted && fromDate.invalid,
            'is-valid': f.submitted && fromDate.valid
          }"
          required
          placeholder={{field_name_hrms_leaves_fromdate}}
        />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <div *ngIf="f.submitted && fromDate.invalid" class="invalid-feedback">
        <div *ngIf="fromDate.errors.required">Please provide fromDate</div>
      </div>

      <mat-form-field style="width: 93px; margin-left: 10px; font-weight: bold">
        <input
          matInput
          [matDatepicker]="picker1"
          [(ngModel)]="model.toDate"
          name="toDate"
          #toDate="ngModel"
          [ngClass]="{
            'is-invalid': f.submitted && toDate.invalid,
            'is-valid': f.submitted && toDate.valid
          }"
          required
          placeholder={{field_name_hrms_leaves_todate}}
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="picker1"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker1></mat-datepicker>
      </mat-form-field>
      <div *ngIf="f.submitted && toDate.invalid" class="invalid-feedback">
        <div *ngIf="toDate.errors.required">Please provide toDate</div>
      </div>
      &nbsp;&nbsp;
      <div style="width: 95px">
        <button class="btn btn-success search-btn font-weight-bold">
          {{ field_name_hrms_leaves_search }}
        </button>
      </div>
    </form>
        <div class="row">
          <div class="col-md-3 col-sm-12">
            <div
              class="form-group has-search dateSection"
              style="display: flex; align-items: center"
            >
              <input
                type="text"
                class="form-control"
                name="leave_type"
                placeholder="Enter Leave Type to search"
                autocomplete="off"
                [(ngModel)]="leave_type"
                (ngModelChange)="searchData('clear')"
              />
              &nbsp;&nbsp;
              <button
              class="btn btn-success"
                (click)="searchData('search')"
               
              >
                <i class="fa fa-search"></i> {{field_name_hrms_leaves_search}}
              </button>
            </div>
            <div
            class="form-group has-search dateSectionMat"
            style="display: flex; align-items: center"
          >
           <mat-form-field
              class="example-full-width"
              style="width: 200px; font-weight: bold"
            >
              <input
                matInput
                [(ngModel)]="leave_type"
                name="leave_type"
                (ngModelChange)="searchData('clear')"
                placeholder="Enter Leave Type to search"
              />
            </mat-form-field>
            <button
              class="btn btn-success search-btn font-weight-bold"
              style="margin-right: 80px"
              (click)="searchData('search')"
            >
              {{ field_name_hrms_leaves_search }}
            </button>
           </div>
          </div>
          <div class="dateSection">
            <div class="col-sm-6">
              <button
                type="button"
                (click)="downloadPdf()"
                class="btn btn-success font-weight-bold"
              >
                <i class="fa fa-file-pdf-o" aria-hidden="true"></i>
                {{ field_name_hrms_leaves_pdf }}
              </button>
            </div>
            <div class="col-sm-6">
              <button
                type="button"
                (click)="generateCsv()"
                class="btn btn-success font-weight-bold"
              >
                <i class="fa fa-building-o" aria-hidden="true"></i
                >{{ field_name_hrms_leaves_csv }}
              </button>
            </div>
          </div>
  
          <div class="d-flex dateSectionMat">
            <div class="col-md-6">
              <button
                type="button"
                (click)="downloadPdf()"
                class="btn btn-success font-weight-bold"
              >
                <i class="fa fa-file-pdf-o" aria-hidden="true"></i>
                {{ field_name_hrms_leaves_pdf }}
              </button>
            </div>
            <div class="col-md-6">
              <button
                type="button"
                class="btn btn-info font-weight-bold"
                (click)="openAddleave()"
              >
                <i class="fa fa-plus" aria-hidden="true"></i
                >{{ field_name_hrms_add_leaves }}
              </button>
            </div>
          </div>
          <div class="dateSection">
            
            <div class="col-md-6">
              <button
                type="button"
                class="btn btn-info font-weight-bold"
                (click)="openAddleave()"
              >
                <i class="fa fa-plus" aria-hidden="true"></i
                >{{ field_name_hrms_add_leaves }}
              </button>
            </div>
          </div>
  
          <div class="d-flex dateSectionMat">
            <div class="col-md-6">
              <button
                type="button"
                (click)="generateCsv()"
                class="btn btn-success font-weight-bold"
              >
                <i class="fa fa-building-o" aria-hidden="true"></i>&nbsp;&nbsp;{{
                  field_name_hrms_leaves_csv
                }}
              </button>
            </div>
           
          </div>
          <!-- <div class="col-md-6"><button type="button" (click)="downloadPdf()" class="btn btn-success">
            <i class="fa fa-file-pdf-o" aria-hidden="true"></i>
           {{field_name_hrms_leaves_pdf}}
          </button>
          <button type="button" (click)="generateCsv()" class="btn btn-success">
            <i class="fa fa-building-o" aria-hidden="true"></i
            >{{field_name_hrms_leaves_csv}}
          </button></div>
          <div class="col-md-3" style="text-align: end">
            <button
              type="button"
              class="btn btn-info"
              (click)="openAddleave()"
             
            >
              <i class="fa fa-plus" aria-hidden="true"></i>{{field_name_hrms_add_leaves}}
            </button>
          </div> -->
          <div class="col-md-3"></div>
          <div class="col-md-3">
            <mat-card style="text-align: center; background: #f1e2b4">
              
              <span style="font-weight: bold">{{field_name_hrms_leaves_annual}}</span
              ><br />
              <span style="font-size: 13px;font-weight: bold">{{this.annualLeaveCount}}</span>
            </mat-card>
          </div>
          <div class="col-md-3">
            <mat-card style="text-align: center; background: #f1e2b4">
              
              <span style="font-weight: bold">{{field_name_hrms_leaves_medical}}</span
              ><br />
              <span style="font-size: 13px;font-weight: bold">{{this.medicalLeaveCount}}</span>
            </mat-card>
          </div>
          <div class="col-md-3">
            <mat-card style="text-align: center; background: #f1e2b4">
              
              <span style="font-weight: bold">{{field_name_hrms_leaves_other}}</span
              ><br />
              <span style="font-size: 13px;font-weight: bold">{{this.otherLeaveCount}}</span>
            </mat-card>
          </div>
          <div class="col-md-3">
            <mat-card style="text-align: center; background: #f1e2b4">
              
              <span style="font-weight: bold">{{field_name_hrms_leaves_remaining}}</span
              ><br />
              <span style="font-size: 13px;font-weight: bold">{{this.remainingLeaveCount}}</span>
            </mat-card>
          </div>
        </div>

        <div class="card-body product-table p-t-35">
          <div class="table-responsive">
            <table
              id="contentToConvert"
              class="table table-striped"
              [mfData]="filteredTableDataArr"
              #mf="mfDataTable"
              [mfRowsOnPage]=""
            >
              <thead class="thead-light">
                <tr>
                  <th width="20%" (click)="sort('first_name')">
                    <mfDefaultSorter by="first_name">
                      {{field_name_hrms_leaves_type}}
                    </mfDefaultSorter>
                    <i class="fa fa-sort"></i>
                  </th>
                  <th width="20%" (click)="sort('last_name')">
                    <mfDefaultSorter by="last_name"
                      >{{field_name_hrms_leaves_from}}
                    </mfDefaultSorter>
                    <i class="fa fa-sort"></i>
                  </th>
                  <th width="20%" (click)="sort('email')">
                    <mfDefaultSorter by="email">{{field_name_hrms_leaves_to}} </mfDefaultSorter>
                    <i class="fa fa-sort"></i>
                  </th>
                  <th width="20%" (click)="sort('email')">
                    <mfDefaultSorter by="email">{{field_name_hrms_leaves_reason}} </mfDefaultSorter>
                    <i class="fa fa-sort"></i>
                  </th>
                  <th width="20%" *ngIf="SHOW_EDIT_DELETE">
                    <mfDefaultSorter>{{field_name_hrms_actons}}</mfDefaultSorter>
                  </th>
                </tr>
              </thead>

              <tbody *ngIf="mf.data?.length >= 1">
                <tr
                  *ngFor="
                    let obj of mf.data
                      | orderBy: key:reverse
                      | paginate
                        : {
                            itemsPerPage: 5,
                            currentPage: p,
                            totalItems: leaveCount
                          };
                    let i = index
                  "
                >
                  <!--  <td>{{obj.user_id}}</td> -->
                  <td>{{ obj.leave_type }}</td>

                  <td>{{ obj.leave_from }}</td>
                  <td>{{ obj.leave_to }}</td>
                  <td>{{ obj.leave_reason }}</td>

                  <td *ngIf="SHOW_EDIT_DELETE">
                    <i class="fa fa-edit" (click)="onClickEdit(obj)"></i>

                    <span *ngIf="ALL_DELETE_ALLOWED"
                      ><i
                        (click)="onClickDelete(obj, p)"
                        class="fa fa-trash"
                      ></i
                    ></span>
                  </td>
                </tr>
              </tbody>
              <tbody *ngIf="mf.data?.length <= 0">
                <tr class="odd" style="opacity: 1">
                  <td
                    valign="top"
                    colspan="8"
                    style="text-align: center"
                    class="dataTables_empty"
                  >
                    No data available in table
                  </td>
                </tr>
              </tbody>

              <tfoot>
                <tr *ngIf="mf.data?.length > 0">
                  <td colspan="4">
                    <pagination-controls
                      (pageChange)="pageChanged((p = $event))"
                    >
                    </pagination-controls>
                    <!--   <mfBootstrapPaginator  [rowsOnPageSet]="[]" ></mfBootstrapPaginator> -->
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
    </form>
  </div>
  </section>


<section *ngIf="this._uiservice.langDataSource.value != 'ar'" dir="ltr">
  <div class="container-fluid">
    <form class="form-row" name="form" #f="ngForm">
      <div class="container-fluid">
        <form class="form-row dateSection" name="form" #f="ngForm">
          <div class="form-group row col-md-4">
            <label class="col-sm-3 col-form-label">
              {{field_name_hrms_leaves_fromdate}}<span class="text-danger font-weight-bold"> *</span></label
            >
            <div class="col-sm-8">
              <input
                type="date"
                class="form-control"
                max="{{ date | date: 'yyyy-MM-dd' }}"
                [(ngModel)]="model.fromDate"
                name="fromDate"
                #fromDate="ngModel"
                [ngClass]="{
                  'is-invalid': f.submitted && fromDate.invalid,
                  'is-valid': f.submitted && fromDate.valid
                }"
                required
              />
    
              <div *ngIf="f.submitted && fromDate.invalid" class="invalid-feedback">
                <div *ngIf="fromDate.errors.required">Please provide fromDate</div>
              </div>
            </div>
          </div>
          <div class="form-group row col-md-4">
            <label class="col-sm-3 col-form-label">
            {{field_name_hrms_leaves_todate}}<span class="text-danger font-weight-bold"> *</span></label
            >
            <div class="col-sm-8">
              <input
                type="date"
                class="form-control"
                [(ngModel)]="model.toDate"
                name="toDate"
                #toDate="ngModel"
                [ngClass]="{
                  'is-invalid': f.submitted && toDate.invalid,
                  'is-valid': f.submitted && toDate.valid
                }"
                required
              />
              <div *ngIf="f.submitted && toDate.invalid" class="invalid-feedback">
                <div *ngIf="toDate.errors.required">Please provide toDate</div>
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <button class="btn btn-success search-btn" (click)="filterData()">
              {{field_name_hrms_leaves_search}}
            </button>
          </div>
        </form>
        <form
        class="form-row dateSectionMat"
        name="form"
        #f="ngForm"
        (ngSubmit)="f.form.valid && filterData()"
      >
        <mat-form-field
          style="width: 110px;font-weight: bold"
        >
          <input
            matInput
            [matDatepicker]="picker"
            [(ngModel)]="model.fromDate"
            name="fromDate"
            #fromDate="ngModel"
            [ngClass]="{
              'is-invalid': f.submitted && fromDate.invalid,
              'is-valid': f.submitted && fromDate.valid
            }"
            required
            placeholder={{field_name_hrms_leaves_fromdate}}
          />
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        <div *ngIf="f.submitted && fromDate.invalid" class="invalid-feedback">
          <div *ngIf="fromDate.errors.required">Please provide fromDate</div>
        </div>
  
        <mat-form-field style="width: 93px; margin-left: 10px; font-weight: bold">
          <input
            matInput
            [matDatepicker]="picker1"
            [(ngModel)]="model.toDate"
            name="toDate"
            #toDate="ngModel"
            [ngClass]="{
              'is-invalid': f.submitted && toDate.invalid,
              'is-valid': f.submitted && toDate.valid
            }"
            required
            placeholder={{field_name_hrms_leaves_todate}}
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker1"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
        <div *ngIf="f.submitted && toDate.invalid" class="invalid-feedback">
          <div *ngIf="toDate.errors.required">Please provide toDate</div>
        </div>
        &nbsp;&nbsp;
        <div style="width: 105px">
          <button class="btn btn-success search-btn font-weight-bold">
            {{ field_name_hrms_leaves_search }}
          </button>
        </div>
      </form>
        <div class="row">
          <div class="col-md-3">
            <div
              class="form-group has-search dateSection"
              style="display: flex; align-items: center"
            >
              <input
                type="text"
                class="form-control"
                name="leave_type"
                placeholder="Enter Leave Type to search"
                autocomplete="off"
                [(ngModel)]="leave_type"
                (ngModelChange)="searchData('clear')"
              />
              &nbsp;&nbsp;
              <button
              class="btn btn-success"
                (click)="searchData('search')"
               
              >
                <i class="fa fa-search"></i> {{field_name_hrms_leaves_search}}
              </button>
            </div>
            <div
            class="form-group has-search dateSectionMat"
            style="display: flex; align-items: center"
          >
           <mat-form-field
              class="example-full-width"
              style="width: 200px; font-weight: bold"
            >
              <input
                matInput
                [(ngModel)]="leave_type"
                name="leave_type"
                (ngModelChange)="searchData('clear')"
                placeholder="Enter Leave Type to search"
              />
            </mat-form-field>
            <button
              class="btn btn-success search-btn font-weight-bold"
              style="margin-left: 42px"
              (click)="searchData('search')"
            >
              {{ field_name_hrms_leaves_search }}
            </button>
           </div>
          </div>
          <div class="dateSection">
            <div class="col-sm-6">
              <button
                type="button"
                (click)="downloadPdf()"
                class="btn btn-success font-weight-bold"
              >
                <i class="fa fa-file-pdf-o" aria-hidden="true"></i>
                {{ field_name_hrms_leaves_pdf }}
              </button>
            </div>
            <div class="col-sm-6">
              <button
                type="button"
                (click)="generateCsv()"
                class="btn btn-success font-weight-bold"
              >
                <i class="fa fa-building-o" aria-hidden="true"></i
                >{{ field_name_hrms_leaves_csv }}
              </button>
            </div>
          </div>
  
          <div class="d-flex dateSectionMat">
            <div class="col-md-6">
              <button
                type="button"
                (click)="downloadPdf()"
                class="btn btn-success font-weight-bold"
              >
                <i class="fa fa-file-pdf-o" aria-hidden="true"></i>
                {{ field_name_hrms_leaves_pdf }}
              </button>
            </div>
            <div class="col-md-6">
              <button
                type="button"
                class="btn btn-info font-weight-bold"
                (click)="openAddleave()"
              >
                <i class="fa fa-plus" aria-hidden="true"></i
                >{{ field_name_hrms_add_leaves }}
              </button>
            </div>
          </div>
          <div class="dateSection">
            
            <div class="col-md-6">
              <button
                type="button"
                class="btn btn-info font-weight-bold"
                (click)="openAddleave()"
              >
                <i class="fa fa-plus" aria-hidden="true"></i
                >{{ field_name_hrms_add_leaves }}
              </button>
            </div>
          </div>
  
          <div class="d-flex dateSectionMat">
            <div class="col-md-6">
              <button
                type="button"
                (click)="generateCsv()"
                class="btn btn-success font-weight-bold"
              >
                <i class="fa fa-building-o" aria-hidden="true"></i>&nbsp;&nbsp;{{
                  field_name_hrms_leaves_csv
                }}
              </button>
            </div>
           
          </div>
          <div class="col-md-3"></div>
          <div class="col-md-3">
            <mat-card style="text-align: center; background: #f1e2b4">
              
              <span style="font-weight: bold">{{field_name_hrms_leaves_annual}}</span
              ><br />
              <span style="font-size: 13px;font-weight: bold">{{this.annualLeaveCount}}</span>
            </mat-card>
          </div>
          <div class="col-md-3">
            <mat-card style="text-align: center; background: #f1e2b4">
              
              <span style="font-weight: bold">{{field_name_hrms_leaves_medical}}</span
              ><br />
              <span style="font-size: 13px;font-weight: bold">{{this.medicalLeaveCount}}</span>
            </mat-card>
          </div>
          <div class="col-md-3">
            <mat-card style="text-align: center; background: #f1e2b4">
              
              <span style="font-weight: bold">{{field_name_hrms_leaves_other}}</span
              ><br />
              <span style="font-size: 13px;font-weight: bold">{{this.otherLeaveCount}}</span>
            </mat-card>
          </div>
          <div class="col-md-3">
            <mat-card style="text-align: center; background: #f1e2b4">
              
              <span style="font-weight: bold">{{field_name_hrms_leaves_remaining}}</span
              ><br />
              <span style="font-size: 13px;font-weight: bold">{{this.remainingLeaveCount}}</span>
            </mat-card>
          </div>
        </div>

        <div class="card-body product-table p-t-35">
          <div class="table-responsive">
            <table
              id="contentToConvert"
              class="table table-striped"
              [mfData]="filteredTableDataArr"
              #mf="mfDataTable"
              [mfRowsOnPage]=""
            >
              <thead class="thead-light">
                <tr>
                  <th width="20%" (click)="sort('first_name')">
                    <mfDefaultSorter by="first_name">
                      {{field_name_hrms_leaves_type}}
                    </mfDefaultSorter>
                    <i class="fa fa-sort"></i>
                  </th>
                  <th width="20%" (click)="sort('last_name')">
                    <mfDefaultSorter by="last_name"
                      >{{field_name_hrms_leaves_from}}
                    </mfDefaultSorter>
                    <i class="fa fa-sort"></i>
                  </th>
                  <th width="20%" (click)="sort('email')">
                    <mfDefaultSorter by="email">{{field_name_hrms_leaves_to}} </mfDefaultSorter>
                    <i class="fa fa-sort"></i>
                  </th>
                  <th width="20%" (click)="sort('email')">
                    <mfDefaultSorter by="email">{{field_name_hrms_leaves_reason}} </mfDefaultSorter>
                    <i class="fa fa-sort"></i>
                  </th>
                  <th width="20%" *ngIf="SHOW_EDIT_DELETE">
                    <mfDefaultSorter>{{field_name_hrms_actons}}</mfDefaultSorter>
                  </th>
                </tr>
              </thead>

              <tbody *ngIf="mf.data?.length >= 1">
                <tr
                  *ngFor="
                    let obj of mf.data
                      | orderBy: key:reverse
                      | paginate
                        : {
                            itemsPerPage: 5,
                            currentPage: p,
                            totalItems: leaveCount
                          };
                    let i = index
                  "
                >
                  <!--  <td>{{obj.user_id}}</td> -->
                  <td>{{ obj.leave_type }}</td>

                  <td>{{ obj.leave_from }}</td>
                  <td>{{ obj.leave_to }}</td>
                  <td>{{ obj.leave_reason }}</td>

                  <td *ngIf="SHOW_EDIT_DELETE">
                    <i class="fa fa-edit" (click)="onClickEdit(obj)"></i>

                    <span *ngIf="ALL_DELETE_ALLOWED"
                      ><i
                        (click)="onClickDelete(obj, p)"
                        class="fa fa-trash"
                      ></i
                    ></span>
                  </td>
                </tr>
              </tbody>
              <tbody *ngIf="mf.data?.length <= 0">
                <tr class="odd" style="opacity: 1">
                  <td
                    valign="top"
                    colspan="8"
                    style="text-align: center"
                    class="dataTables_empty"
                  >
                    No data available in table
                  </td>
                </tr>
              </tbody>

              <tfoot>
                <tr *ngIf="mf.data?.length > 0">
                  <td colspan="4">
                    <pagination-controls
                      (pageChange)="pageChanged((p = $event))"
                    >
                    </pagination-controls>
                    <!--   <mfBootstrapPaginator  [rowsOnPageSet]="[]" ></mfBootstrapPaginator> -->
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
    </form>
  </div>
</section>
